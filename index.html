<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CanÄ±mdÄ±n Benim</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;1,400&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    background:#000;color:#fff;
    font-family:'Cormorant Garamond',serif;
    overflow:hidden;
}
.background{position:fixed;inset:0;background:radial-gradient(#0a0a0a,#000);z-index:1}
.stars-layer,.nebula{position:fixed;inset:0;z-index:2}
.star{position:absolute;background:#fff;border-radius:50%;animation:twinkle 3s infinite}
@keyframes twinkle{0%,100%{opacity:.2}50%{opacity:1}}

.start-screen{
    position:fixed;inset:0;
    background:#000;z-index:1000;
    display:flex;flex-direction:column;
    justify-content:center;align-items:center;
    transition:opacity 2s
}
.start-screen.fadeout{opacity:0;pointer-events:none}

.main-title{
    font-family:'Cinzel',serif;
    font-size:4em;
    background:linear-gradient(135deg,#ffd700,#ffed4e);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}
.subtitle{opacity:.7;margin-bottom:60px}
.start-button{
    padding:25px 80px;
    border:none;border-radius:60px;
    background:linear-gradient(135deg,#ffd700,#ffed4e);
    font-family:'Cinzel',serif;
    font-size:1.4em;cursor:pointer
}

.main-content{
    position:fixed;inset:0;
    display:flex;flex-direction:column;
    align-items:center;justify-content:center;
    z-index:10
}

.current-verse{
    font-size:3.2em;
    text-align:center;
    opacity:0;
    transform:translateY(40px);
    transition:1s;
    min-height:140px
}
.current-verse.show{opacity:1;transform:translateY(0)}
.current-verse.golden{
    background:linear-gradient(135deg,#ffd700,#ffed4e);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    font-style:italic
}

.lyrics-bottom{
    position:fixed;bottom:0;width:100%;
    padding:40px 20px;
    background:linear-gradient(to top,rgba(0,0,0,.95),transparent);
    z-index:100
}
.lyric-line{opacity:.3;transition:.4s;text-align:center}
.lyric-line.active{opacity:1;color:#ffd700;font-size:1.4em}

.progress-container{
    position:fixed;bottom:10px;
    width:80%;height:4px;
    background:rgba(255,255,255,.1);
    border-radius:10px;overflow:hidden;
    z-index:200
}
.progress-bar{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#ffd700,#ffed4e)
}

.audio-control{position:fixed;top:30px;right:30px;z-index:200}
.volume-btn{
    width:60px;height:60px;
    border-radius:50%;
    background:rgba(255,215,0,.2);
    border:2px solid rgba(255,215,0,.4);
    color:#ffd700;font-size:1.5em;cursor:pointer
}
</style>
</head>

<body>

<div class="background"></div>
<div class="stars-layer" id="starsLayer"></div>

<div class="start-screen" id="startScreen">
    <h1 class="main-title">Liselim Benim</h1>
    <p class="subtitle">Azraâ€™m</p>
    <button class="start-button" id="startBtn">BaÅŸlat</button>
</div>

<div class="main-content">
    <div class="current-verse" id="currentVerse"></div>

    <div class="lyrics-bottom" id="lyricsTrack"></div>

    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
</div>

<div class="audio-control">
    <button class="volume-btn" id="volumeBtn">â™ª</button>
</div>

<audio id="bgMusic" preload="auto">
    <source src="ask.mp3" type="audio/mpeg">
</audio>

<script>
const verses = [
 "Seninle her gÃ¼nÃ¼m Ã¶mre bedeldi",
 "GÃ¶nÃ¼l dediÄŸimde baÄŸÄ±mdÄ±n benim",
 "Unutmak mÃ¼mkÃ¼n mÃ¼ liselim seni",
 "HayatÄ±m varlÄ±ÄŸÄ±m canÄ±mdÄ±n benim",
 "Seninle her gÃ¼nÃ¼m Ã¶mre bedeldi",
 "GÃ¶nÃ¼l dediÄŸimde baÄŸÄ±mdÄ±n benim",
 "Unutmak mÃ¼mkÃ¼n mÃ¼ liselim seni",
 "HayatÄ±m, varlÄ±ÄŸÄ±m, canÄ±mdÄ±n benim"
];

const bgMusic = document.getElementById("bgMusic");
const startBtn = document.getElementById("startBtn");
const startScreen = document.getElementById("startScreen");
const currentVerse = document.getElementById("currentVerse");
const lyricsTrack = document.getElementById("lyricsTrack");
const progressBar = document.getElementById("progressBar");
const volumeBtn = document.getElementById("volumeBtn");

let muted = false;
let index = 0;
let lastSwitch = 0;

// alt lyricleri oluÅŸtur
lyricsTrack.innerHTML = "";
verses.forEach(v=>{
    const d=document.createElement("div");
    d.className="lyric-line";
    d.textContent=v;
    lyricsTrack.appendChild(d);
});

function showVerse(i){
    currentVerse.classList.remove("show","golden");
    setTimeout(()=>{
        currentVerse.textContent = verses[i];
        currentVerse.classList.add("show");
        if(i === verses.length-1) currentVerse.classList.add("golden");

        document.querySelectorAll(".lyric-line").forEach((l,idx)=>{
            l.classList.toggle("active", idx === i);
        });
    },150);
}

/* ðŸŽ§ AUDIO ANALYSIS */
let audioCtx, analyser, dataArray;

function setupAudioAnalysis(){
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const source = audioCtx.createMediaElementSource(bgMusic);
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = 1024;
    dataArray = new Uint8Array(analyser.frequencyBinCount);

    source.connect(analyser);
    analyser.connect(audioCtx.destination);

    analyze();
}

function analyze(){
    analyser.getByteTimeDomainData(dataArray);

    let sum = 0;
    for(let i=0;i<dataArray.length;i++){
        let v = (dataArray[i]-128)/128;
        sum += v*v;
    }
    let rms = Math.sqrt(sum/dataArray.length);
    let now = performance.now();

    // ðŸ”¥ SES VURGUSU ALGILAMA
    if(rms > 0.23 && now - lastSwitch > 800){
        index++;
        if(index >= verses.length) index = verses.length-1;
        showVerse(index);
        lastSwitch = now;
    }

    requestAnimationFrame(analyze);
}

/* ðŸŽšï¸ PROGRESS BAR */
bgMusic.addEventListener("timeupdate",()=>{
    if(bgMusic.duration){
        progressBar.style.width = 
            (bgMusic.currentTime/bgMusic.duration)*100 + "%";
    }
});

/* ðŸ” LOOP */
bgMusic.addEventListener("ended",()=>{
    index = 0;
    showVerse(0);
    bgMusic.currentTime = 0;
    bgMusic.play();
});

/* â–¶ START */
startBtn.addEventListener("click", async ()=>{
    startScreen.classList.add("fadeout");
    await bgMusic.play();
    setupAudioAnalysis();
    showVerse(0);
    setTimeout(()=>startScreen.style.display="none",2000);
});

/* ðŸ”Š VOLUME */
volumeBtn.onclick = ()=>{
    muted = !muted;
    bgMusic.muted = muted;
    volumeBtn.textContent = muted ? "â™ªÌ¸" : "â™ª";
};

/* âœ¨ STARS */
function createStars(){
    const layer=document.getElementById("starsLayer");
    for(let i=0;i<100;i++){
        const s=document.createElement("div");
        s.className="star";
        const size=Math.random()*3;
        s.style.width=s.style.height=size+"px";
        s.style.left=Math.random()*100+"%";
        s.style.top=Math.random()*100+"%";
        layer.appendChild(s);
    }
}
createStars();
</script>


</body>
</html>
